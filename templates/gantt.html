{% extends "base.html" %}
{% block content %}
<div class="card glass">
  <h2>Gantt (Global → Site → Job)</h2>
  <div class="ctrl">
    <select id="fCategory"><option value="">All Categories</option><option>Drilling</option><option>Electrical</option><option>Domestic</option><option>Ag</option></select>
    <select id="fStatus"><option value="">All Statuses</option><option>Planned</option><option>In Progress</option><option>Done</option><option>On Hold</option><option>Canceled</option></select>
    <input type="date" id="fStart">
    <input type="date" id="fEnd">
    <input type="text" id="fQuery" placeholder="Search customers, sites, jobs…" style="min-width:240px;">
    <button class="btn gold" id="btnExportJobs">Export Jobs CSV</button>
  </div>
</div>

<div class="card glass">
  <div id="legend" style="display:flex;gap:20px;flex-wrap:wrap;">
    <div><span class="legend-box cat-drilling"></span> Drilling</div>
    <div><span class="legend-box cat-electrical"></span> Electrical</div>
    <div><span class="legend-box cat-domestic"></span> Domestic</div>
    <div><span class="legend-box cat-ag"></span> Ag</div>
    <div><span class="legend-box task"></span> Duties/Tasks</div>
  </div>
</div>

<div class="gantt-wrap card glass"><div id="ganttGlobal" class="gantt-container"></div></div>
<div class="gantt-wrap card glass"><div id="ganttSite" class="gantt-container"></div></div>
<div class="gantt-wrap card glass"><div id="ganttJob" class="gantt-container"></div></div>

<div class="ctrl">
  <button class="btn gold" id="btnGanttPng">Download Visible Gantt as PNG</button>
  <a class="btn gold" id="btnTasksCsv" style="display:none;">Export Current Job Tasks CSV</a>
</div>

<script src="/static/gantt.js"></script>
{% endblock %}
